<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of updateInfo</title>
  <meta name="keywords" content="updateInfo">
  <meta name="description" content=" updates the information shown in all information list boxes">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # nucleus --><!-- # functions --><!-- menu.html interface -->
<h1>updateInfo
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong> updates the information shown in all information list boxes</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function updateInfo(src,~) %#ok<INUSD> </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">updateInfo updates the information shown in all information list boxes

 Syntax:
       updateInfo(src)

 Inputs:
       src - handle of the calling object

 Outputs:
       none

 Example:
       updateInfo(src,~)

 Other m-files required:
       none

 Subfunctions:
       none

 MAT-files required:
       none

 See also: NUCLEUSinv
 Author: Thomas Hiller
 email: thomas.hiller[at]leibniz-liag.de
 License: MIT License (at end)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../nucleus/NUCLEUSinv/NUCLEUSinv_createPanelPlots.html" class="code" title="function [gui,myui] = NUCLEUSinv_createPanelPlots(gui,myui)">NUCLEUSinv_createPanelPlots</a>	 creates graphics panel</li><li><a href="../../../nucleus/callbacks/edits/onEditValue.html" class="code" title="function onEditValue(src,~)">onEditValue</a>	 updates all edit field values, checks for wrong inputs and</li><li><a href="../../../nucleus/callbacks/listboxes/onListboxData.html" class="code" title="function onListboxData(src,~)">onListboxData</a>	 handles the calls from the context menu of the data</li><li><a href="../../../nucleus/callbacks/menus/onMenuJointInversion.html" class="code" title="function onMenuJointInversion(src,~)">onMenuJointInversion</a>	 handles the call from the menu that activates / deactivates</li><li><a href="../../../nucleus/callbacks/radio/onRadioGates.html" class="code" title="function onRadioGates(src,~)">onRadioGates</a>	 selects the re-sampling / gating method ("log", "lin" or "none")</li><li><a href="../../../nucleus/callbacks/radio/onRadioNormalize.html" class="code" title="function onRadioNormalize(src,~)">onRadioNormalize</a>	 selects whether to normalize a NMR signal to 1</li><li><a href="importINV2INV.html" class="code" title="function importINV2INV(src)">importINV2INV</a>	 imports a previously saved NUCLEUSinv session</li><li><a href="runInversionJoint.html" class="code" title="function runInversionJoint">runInversionJoint</a>	 controls the joint inversion process to infer a pore size</li><li><a href="runInversionStd.html" class="code" title="function runInversionStd">runInversionStd</a>	 controls the standard inversion process to invert a</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function updateInfo(src,~) </a><span class="comment">%#ok&lt;INUSD&gt;</span>
0002 <span class="comment">%updateInfo updates the information shown in all information list boxes</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% Syntax:</span>
0005 <span class="comment">%       updateInfo(src)</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% Inputs:</span>
0008 <span class="comment">%       src - handle of the calling object</span>
0009 <span class="comment">%</span>
0010 <span class="comment">% Outputs:</span>
0011 <span class="comment">%       none</span>
0012 <span class="comment">%</span>
0013 <span class="comment">% Example:</span>
0014 <span class="comment">%       updateInfo(src,~)</span>
0015 <span class="comment">%</span>
0016 <span class="comment">% Other m-files required:</span>
0017 <span class="comment">%       none</span>
0018 <span class="comment">%</span>
0019 <span class="comment">% Subfunctions:</span>
0020 <span class="comment">%       none</span>
0021 <span class="comment">%</span>
0022 <span class="comment">% MAT-files required:</span>
0023 <span class="comment">%       none</span>
0024 <span class="comment">%</span>
0025 <span class="comment">% See also: NUCLEUSinv</span>
0026 <span class="comment">% Author: Thomas Hiller</span>
0027 <span class="comment">% email: thomas.hiller[at]leibniz-liag.de</span>
0028 <span class="comment">% License: MIT License (at end)</span>
0029 
0030 <span class="comment">%------------- BEGIN CODE --------------</span>
0031 
0032 <span class="comment">%% get GUI handle and data</span>
0033 fig = findobj(<span class="string">'Tag'</span>,<span class="string">'INV'</span>);
0034 gui = getappdata(fig,<span class="string">'gui'</span>);
0035 data = getappdata(fig,<span class="string">'data'</span>);
0036 
0037 <span class="comment">% because at startup the Callbacks are triggered even though not all</span>
0038 <span class="comment">% elements are yet drawn, they are not shown as default</span>
0039 showit = false;
0040 
0041 <span class="comment">%% find out what panel is shown in order to update the corresponding box</span>
0042 <span class="keyword">if</span> isfield(gui,<span class="string">'plots'</span>) &amp;&amp; isfield(gui,<span class="string">'listbox_handles'</span>)
0043     whichsignal = get(gui.plots.SignalPanel,<span class="string">'Selection'</span>);
0044     whichdist = get(gui.plots.DistPanel,<span class="string">'Selection'</span>);
0045     
0046     <span class="comment">% font size of subscripts</span>
0047     subfs = floor(get(gui.listbox_handles.info_dist,<span class="string">'FontSize'</span>) / 3);
0048     
0049     <span class="comment">% show info switch</span>
0050     showit = true;
0051 <span class="keyword">end</span>
0052 
0053 <span class="comment">% if we can show it ...</span>
0054 <span class="keyword">if</span> showit
0055     <span class="comment">%% signal panel info</span>
0056     info{1,1} = <span class="string">' '</span>;
0057     <span class="keyword">switch</span> whichsignal
0058         <span class="keyword">case</span> 1 <span class="comment">% PROC</span>
0059             <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0060                 nmrproc = data.results.nmrproc;
0061                 <span class="keyword">switch</span> nmrproc.T1T2
0062                     <span class="keyword">case</span> <span class="string">'T1'</span>
0063                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Sampl. = '</span>,sprintf(<span class="string">'%d'</span>,length(nmrproc.t)),<span class="keyword">...</span>
0064                             <span class="string">' ('</span>,data.process.gatetype,<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0065                     <span class="keyword">case</span> <span class="string">'T2'</span>
0066                         <span class="keyword">switch</span> data.process.gatetype
0067                             <span class="keyword">case</span> <span class="string">'raw'</span>
0068                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Echos &amp;nbsp= '</span>,<span class="keyword">...</span>
0069                                     sprintf(<span class="string">'%d'</span>,length(nmrproc.t)),<span class="keyword">...</span>
0070                                     <span class="string">' ('</span>,data.process.gatetype,<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0071                             <span class="keyword">otherwise</span>
0072                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Gates &amp;nbsp= '</span>,<span class="keyword">...</span>
0073                                     sprintf(<span class="string">'%d'</span>,length(nmrproc.t)),<span class="keyword">...</span>
0074                                     <span class="string">' ('</span>,data.process.gatetype,<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0075                         <span class="keyword">end</span>
0076                 <span class="keyword">end</span>
0077                 
0078                 <span class="keyword">switch</span> data.process.norm
0079                     <span class="keyword">case</span> 0
0080                         <span class="keyword">if</span> max(nmrproc.s) &lt; 1e-3
0081                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;A_max &amp;nbsp= '</span>,<span class="keyword">...</span>
0082                                 sprintf(<span class="string">'%5.4e'</span>,max(nmrproc.s)),<span class="keyword">...</span>
0083                                 <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0084                         <span class="keyword">else</span>
0085                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;A_max &amp;nbsp= '</span>,<span class="keyword">...</span>
0086                                 sprintf(<span class="string">'%5.4f'</span>,max(nmrproc.s)),<span class="keyword">...</span>
0087                                 <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0088                         <span class="keyword">end</span>
0089                     <span class="keyword">case</span> 1
0090                         <span class="keyword">if</span> max(nmrproc.s) &lt; 1e-3
0091                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Normfac = '</span>,<span class="keyword">...</span>
0092                                 sprintf(<span class="string">'%5.4e'</span>,max(data.process.normfac)),<span class="keyword">...</span>
0093                                 <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0094                         <span class="keyword">else</span>
0095                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Normfac = '</span>,<span class="keyword">...</span>
0096                                 sprintf(<span class="string">'%5.4f'</span>,max(data.process.normfac)),<span class="keyword">...</span>
0097                                 <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0098                         <span class="keyword">end</span>
0099                         
0100                 <span class="keyword">end</span>
0101                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;noise &amp;nbsp= '</span>,sprintf(<span class="string">'%5.4e'</span>,nmrproc.noise),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0102                 info{end+1,1} = <span class="string">' '</span>;
0103                 
0104                 <span class="comment">% possible inversion results/statistics</span>
0105                 <span class="keyword">if</span> isfield(data.results,<span class="string">'invstd'</span>)
0106                     invstd = data.results.invstd;
0107                     invtype = data.invstd.invtype;
0108                     
0109                     <span class="keyword">switch</span> invtype
0110                         <span class="keyword">case</span> <span class="string">'mono'</span>
0111                             ciE0 = sum(full(invstd.ci(1:2:end)));
0112                             <span class="keyword">switch</span> nmrproc.T1T2
0113                                 <span class="keyword">case</span> <span class="string">'T1'</span>
0114                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&amp;infin&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0115                                         sprintf(<span class="string">'%5.4e'</span>,sum(invstd.E0)),<span class="keyword">...</span>
0116                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4e'</span>,ciE0),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0117                                 <span class="keyword">case</span> <span class="string">'T2'</span>
0118                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;0&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0119                                         sprintf(<span class="string">'%5.4e'</span>,sum(invstd.E0)),<span class="keyword">...</span>
0120                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4e'</span>,ciE0),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0121                             <span class="keyword">end</span>
0122                             info{end+1,1} = <span class="string">' '</span>;
0123                             <span class="keyword">if</span> isfield(invstd,<span class="string">'chi2'</span>)
0124                                 <span class="keyword">if</span> ~isnan(invstd.chi2)
0125                                     str = [<span class="string">'&amp;Chi&lt;sup&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sup&gt; = '</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.chi2)];
0126                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0127                                 <span class="keyword">end</span>
0128                             <span class="keyword">end</span>
0129                             str = [<span class="string">'RMS = '</span>,sprintf(<span class="string">'%5.4e'</span>,invstd.rms),<span class="string">' ('</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.rms*100./sum(invstd.E0)),<span class="string">'%)'</span>];
0130                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0131                             <span class="keyword">if</span> strcmp(nmrproc.T1T2,<span class="string">'T2'</span>) &amp;&amp; nmrproc.noise ~= 0
0132                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;S/N = '</span>,sprintf(<span class="string">'%4d'</span>,floor(sum(invstd.E0)/nmrproc.noise)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0133                             <span class="keyword">end</span>
0134                             
0135                         <span class="keyword">case</span> <span class="string">'free'</span>
0136                             ciE0s = sum(full(invstd.ci(1:2:end)));
0137                             E0 = invstd.E0;
0138                             <span class="keyword">switch</span> nmrproc.T1T2
0139                                 <span class="keyword">case</span> <span class="string">'T1'</span>
0140                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&amp;infin&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0141                                         sprintf(<span class="string">'%5.4e'</span>,sum(E0)),<span class="keyword">...</span>
0142                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4e'</span>,ciE0s),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0143                                 <span class="keyword">case</span> <span class="string">'T2'</span>
0144                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;0&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0145                                         sprintf(<span class="string">'%5.4e'</span>,sum(E0)),<span class="keyword">...</span>
0146                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4e'</span>,ciE0s),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0147                             <span class="keyword">end</span>
0148                             info{end+1,1} = <span class="string">' '</span>;
0149                             <span class="keyword">if</span> isfield(invstd,<span class="string">'chi2'</span>)
0150                                 <span class="keyword">if</span> ~isnan(invstd.chi2)
0151                                     str = [<span class="string">'&amp;Chi&lt;sup&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sup&gt; = '</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.chi2)];
0152                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0153                                 <span class="keyword">end</span>
0154                             <span class="keyword">end</span>
0155                             str = [<span class="string">'RMS = '</span>,sprintf(<span class="string">'%5.4e'</span>,invstd.rms),<span class="string">' ('</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.rms*100./sum(invstd.E0)),<span class="string">'%)'</span>];
0156                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0157                             
0158                             <span class="keyword">if</span> strcmp(nmrproc.T1T2,<span class="string">'T2'</span>) &amp;&amp; nmrproc.noise ~= 0
0159                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;S/N = '</span>,sprintf(<span class="string">'%4d'</span>,floor(sum(invstd.E0)/nmrproc.noise)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0160                             <span class="keyword">end</span>
0161                             
0162                         <span class="keyword">case</span> {<span class="string">'LU'</span>,<span class="string">'NNLS'</span>}
0163                             <span class="keyword">switch</span> nmrproc.T1T2
0164                                 <span class="keyword">case</span> <span class="string">'T1'</span>
0165                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&amp;infin&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0166                                         sprintf(<span class="string">'%5.4e'</span>,sum(invstd.E0)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0167                                 <span class="keyword">case</span> <span class="string">'T2'</span>
0168                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E&lt;sub&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;0&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0169                                         sprintf(<span class="string">'%5.4e'</span>,sum(invstd.E0)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0170                             <span class="keyword">end</span>
0171                             info{end+1,1} = <span class="string">' '</span>;
0172                             <span class="keyword">if</span> isfield(invstd,<span class="string">'chi2'</span>)
0173                                 <span class="keyword">if</span> ~isnan(invstd.chi2)
0174                                     str = [<span class="string">'&amp;Chi&lt;sup&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sup&gt; = '</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.chi2)];
0175                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0176                                 <span class="keyword">end</span>
0177                             <span class="keyword">end</span>
0178                             str = [<span class="string">'RMS = '</span>,sprintf(<span class="string">'%5.4e'</span>,invstd.rms),<span class="string">' ('</span>,sprintf(<span class="string">'%4.2f'</span>,invstd.rms*100./sum(invstd.E0)),<span class="string">'%)'</span>];
0179                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;'</span>,str,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0180                             
0181                             <span class="keyword">if</span> strcmp(nmrproc.T1T2,<span class="string">'T2'</span>) &amp;&amp; nmrproc.noise ~= 0
0182                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;S/N = '</span>,sprintf(<span class="string">'%4d'</span>,floor(sum(invstd.E0)/nmrproc.noise)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0183                             <span class="keyword">end</span>
0184                             
0185                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;&amp;lambda = '</span>,sprintf(<span class="string">'%6.5f'</span>,invstd.lambda_out),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0186                             info{end+1,1} = <span class="string">' '</span>;
0187                     <span class="keyword">end</span>
0188                 <span class="keyword">end</span>
0189             <span class="keyword">end</span>
0190             
0191         <span class="keyword">case</span> 2 <span class="comment">% RAW</span>
0192             <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0193                 <span class="comment">% add filename &amp; date information</span>
0194                 id = get(gui.listbox_handles.signal,<span class="string">'Value'</span>);
0195                 info{end+1,1} = data.import.NMR.filesShort{id};
0196                 info{end+1,1} = data.import.NMR.data{id}.date;
0197                 info{end+1,1} = <span class="string">' '</span>;
0198                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;t_min &amp;nbsp= '</span>,<span class="keyword">...</span>
0199                     sprintf(<span class="string">'%5.4e'</span>,data.results.nmrraw.t(1)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0200                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;t_max &amp;nbsp= '</span>,<span class="keyword">...</span>
0201                     sprintf(<span class="string">'%5.4e'</span>,data.results.nmrraw.t(end)),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0202                 <span class="keyword">switch</span> data.results.nmrproc.T1T2
0203                     <span class="keyword">case</span> <span class="string">'T1'</span>
0204                         info{end+1,1} = <span class="string">' '</span>;
0205                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Sampl. = '</span>,<span class="keyword">...</span>
0206                             sprintf(<span class="string">'%d'</span>,length(data.results.nmrproc.t)),<span class="keyword">...</span>
0207                             <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0208                     <span class="keyword">case</span> <span class="string">'T2'</span>
0209                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;t_echo = '</span>,<span class="keyword">...</span>
0210                             sprintf(<span class="string">'%5.4e'</span>,data.results.nmrproc.echotime),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0211                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;t_dead = '</span>,<span class="keyword">...</span>
0212                             sprintf(<span class="string">'%5.4e'</span>,data.results.nmrproc.dead),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0213                         info{end+1,1} = <span class="string">' '</span>;
0214                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;Echos &amp;nbsp= '</span>,<span class="keyword">...</span>
0215                             sprintf(<span class="string">'%d'</span>,length(data.results.nmrraw.t)),<span class="keyword">...</span>
0216                             <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0217                 <span class="keyword">end</span>
0218                 <span class="keyword">if</span> max(data.results.nmrproc.s) &lt; 1e-3
0219                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;A_max &amp;nbsp= '</span>,<span class="keyword">...</span>
0220                         sprintf(<span class="string">'%5.4e'</span>,max(data.results.nmrproc.s)),<span class="keyword">...</span>
0221                         <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0222                 <span class="keyword">else</span>
0223                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;A_max &amp;nbsp= '</span>,<span class="keyword">...</span>
0224                         sprintf(<span class="string">'%5.4f'</span>,max(data.results.nmrproc.s)),<span class="keyword">...</span>
0225                         <span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0226                 <span class="keyword">end</span>
0227                 info{end+1,1} = <span class="string">' '</span>;
0228                 
0229                 <span class="keyword">if</span> isfield(data.import,<span class="string">'BAM'</span>)
0230                     a = data.import.NMR.data{id}.phase_bam;
0231                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;phase TOM&amp;nbsp= '</span>,<span class="keyword">...</span>
0232                         sprintf(<span class="string">'%5.2f'</span>,rad2deg(a)),<span class="keyword">...</span>
0233                         <span class="string">'°&lt;/BODY&gt;&lt;/HTML&gt;'</span>];                    
0234                 <span class="keyword">end</span>
0235                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;phase fit&amp;nbsp= '</span>,<span class="keyword">...</span>
0236                         sprintf(<span class="string">'%5.2f'</span>,rad2deg(data.results.nmrraw.phase)),<span class="keyword">...</span>
0237                         <span class="string">'°&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0238                 info{end+1,1} = <span class="string">' '</span>;
0239             <span class="keyword">end</span>
0240             
0241         <span class="keyword">case</span> 3 <span class="comment">% ALL</span>
0242             <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0243                 <span class="keyword">if</span> isfield(data.results,<span class="string">'invjoint'</span>)
0244                     invjoint = data.results.invjoint;
0245                     nmr = invjoint.idata.nmr;
0246                     levels = invjoint.levels;
0247                     
0248                     <span class="comment">% global fit error</span>
0249                     info{end+1,1} = [<span class="string">'ErrNorm: '</span>,sprintf(<span class="string">'%5.4e'</span>,invjoint.errnorm)];
0250                     info{end+1,1} = [<span class="string">'RMS: '</span>,sprintf(<span class="string">'%5.4e'</span>,invjoint.rms)];
0251                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;&amp;Chi&lt;sup&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sup&gt;: '</span>,<span class="keyword">...</span>
0252                         sprintf(<span class="string">'%5.4f'</span>,invjoint.chi2),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0253                     info{end+1,1}  = <span class="string">' '</span>;
0254                     info{end+1,1}  = <span class="string">'-----'</span>;
0255                     info{end+1,1}  = <span class="string">' '</span>;
0256                     
0257                     <span class="keyword">for</span> i = 1:numel(levels)
0258                         info{end+1,1} = nmr{levels(i)}.name;
0259                         info{end+1,1} = [<span class="string">'RMS: '</span>,sprintf(<span class="string">'%5.4e'</span>,nmr{levels(i)}.rms)];
0260                         info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;&amp;Chi&lt;sup&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sup&gt;: '</span>,<span class="keyword">...</span>
0261                             sprintf(<span class="string">'%5.4f'</span>,nmr{levels(i)}.chi2),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0262                         info{end+1,1} = <span class="string">' '</span>;
0263                     <span class="keyword">end</span>
0264                 <span class="keyword">end</span>
0265             <span class="keyword">end</span>
0266     <span class="keyword">end</span>
0267     <span class="comment">% and update the text box</span>
0268     set(gui.listbox_handles.info_signal,<span class="string">'String'</span>,info,<span class="string">'Value'</span>,[],<span class="string">'Max'</span>,2,<span class="string">'Min'</span>,0);
0269     
0270     <span class="comment">%% RTD panel info</span>
0271     clear info;
0272     info{1,1} = <span class="string">' '</span>;
0273     <span class="keyword">switch</span> whichdist
0274         <span class="keyword">case</span> 1 <span class="comment">% RTD</span>
0275             <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0276                 <span class="keyword">if</span> isfield(data.results,<span class="string">'invstd'</span>)
0277                     nmrproc = data.results.nmrproc;
0278                     invstd = data.results.invstd;
0279                     invtype = data.invstd.invtype;
0280                     
0281                     <span class="keyword">switch</span> invtype
0282                         <span class="keyword">case</span> <span class="string">'mono'</span>
0283                             info{end+1,1} = invtype;
0284                             info{end+1,1} = <span class="string">' '</span>;
0285                             ciT = sum(full(invstd.ci(2:2:end)));
0286                             
0287                             <span class="keyword">switch</span> nmrproc.T1T2
0288                                 <span class="keyword">case</span> <span class="string">'T1'</span>
0289                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;T&lt;sub&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;1&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0290                                         sprintf(<span class="string">'%5.4f'</span>,invstd.T1),<span class="keyword">...</span>
0291                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4f'</span>,ciT),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0292                                 <span class="keyword">case</span> <span class="string">'T2'</span>
0293                                     info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;T&lt;sub&gt;&lt;font size=&quot;'</span>,num2str(subfs),<span class="string">'&quot;&gt;2&lt;/sub&gt; = '</span>,<span class="keyword">...</span>
0294                                         sprintf(<span class="string">'%5.4f'</span>,invstd.T2),<span class="keyword">...</span>
0295                                         <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4f'</span>,ciT),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0296                             <span class="keyword">end</span>
0297                             info{end+1,1} = <span class="string">' '</span>;
0298                             
0299                         <span class="keyword">case</span> <span class="string">'free'</span>
0300                             str = [invtype,<span class="string">' '</span>,num2str(data.invstd.freeDT)];
0301                             info{end+1,1} = str;
0302                             info{end+1,1} = <span class="string">' '</span>;
0303                             
0304                             E0 = invstd.E0;
0305                             ciE0 = full(invstd.ci(1:2:end));
0306                             ciT = full(invstd.ci(2:2:end));
0307                             
0308                             <span class="keyword">switch</span> nmrproc.T1T2
0309                                 <span class="keyword">case</span> <span class="string">'T1'</span>
0310                                     T = invstd.T1;
0311                                 <span class="keyword">case</span> <span class="string">'T2'</span>
0312                                     T = invstd.T2;
0313                             <span class="keyword">end</span>
0314                             
0315                             <span class="keyword">for</span> i = 1:length(T)
0316                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;T('</span>,num2str(i),<span class="string">') = '</span>,sprintf(<span class="string">'%5.4f'</span>,T(i)),<span class="keyword">...</span>
0317                                     <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4f'</span>,ciT(i)),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>]; <span class="comment">%#ok&lt;*AGROW&gt;</span>
0318                                 info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;E('</span>,num2str(i),<span class="string">') = '</span>,sprintf(<span class="string">'%5.4f'</span>,E0(i)),<span class="keyword">...</span>
0319                                     <span class="string">' &amp;#8723 ('</span>,sprintf(<span class="string">'%5.4f'</span>,ciE0(i)),<span class="string">')'</span>,<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0320                             <span class="keyword">end</span>
0321                             info{end+1,1} = <span class="string">' '</span>;
0322                             
0323                         <span class="keyword">case</span> {<span class="string">'LU'</span>,<span class="string">'NNLS'</span>}
0324                             <span class="comment">% info is a cell array</span>
0325                             str = [invtype,<span class="string">' '</span>,data.invstd.regtype,<span class="string">' '</span>,num2str(data.invstd.Lorder)];
0326                             info{end+1,1} = str;
0327                             info{end+1,1} = <span class="string">' '</span>;
0328                             
0329                             <span class="comment">% TLGM</span>
0330                             info{end+1,1} = [<span class="string">'&lt;HTML&gt;&lt;BODY&gt;TLGM&lt;/sub&gt; = '</span>,sprintf(<span class="string">'%5.4f'</span>,invstd.Tlgm),<span class="string">'&lt;/BODY&gt;&lt;/HTML&gt;'</span>];
0331                             info{end+1,1} = <span class="string">' '</span>;
0332                             
0333                             <span class="comment">% clay-bound water CBW &lt; tcut ms</span>
0334                             <span class="comment">% irreducible water / capillary water BVI ccut - tcut ms</span>
0335                             <span class="comment">% movable water BVM &gt; tcut ms</span>
0336                             <span class="keyword">switch</span> data.process.timescale
0337                                 <span class="keyword">case</span> <span class="string">'s'</span>
0338                                     ccut = data.param.CBWcutoff/1000;
0339                                     tcut = data.param.BVIcutoff/1000;
0340                                 <span class="keyword">case</span> <span class="string">'ms'</span>
0341                                     ccut = data.param.CBWcutoff;
0342                                     tcut = data.param.BVIcutoff;
0343                             <span class="keyword">end</span>
0344                             por = data.invstd.porosity;
0345                             CBW = abs(sum(invstd.T1T2f(invstd.T1T2me&lt;=ccut))/sum(invstd.T1T2f));
0346                             BVI = abs(sum(invstd.T1T2f(invstd.T1T2me&gt;ccut &amp; invstd.T1T2me&lt;=tcut))/sum(invstd.T1T2f));
0347                             BVM = abs(sum(invstd.T1T2f(invstd.T1T2me&gt;tcut))/sum(invstd.T1T2f));
0348                             info{end+1,1} = [<span class="string">'CBW('</span>,sprintf(<span class="string">'%2d'</span>,data.param.CBWcutoff),<span class="keyword">...</span>
0349                                 <span class="string">') = '</span>,sprintf(<span class="string">'%5.2f'</span>,por*CBW*100),<span class="string">' [vol. %]'</span>];
0350                             
0351                             info{end+1,1} = [<span class="string">'BVI('</span>,sprintf(<span class="string">'%2d'</span>,data.param.BVIcutoff),<span class="keyword">...</span>
0352                                 <span class="string">') = '</span>,sprintf(<span class="string">'%5.2f'</span>,por*BVI*100),<span class="string">' [vol. %]'</span>];
0353                             info{end+1,1} = [<span class="string">'BVM     = '</span>,sprintf(<span class="string">'%5.2f'</span>,por*BVM*100),<span class="string">' [vol. %]'</span>];
0354                             
0355                     <span class="keyword">end</span>
0356                 <span class="keyword">end</span>
0357             <span class="keyword">end</span>
0358             
0359         <span class="keyword">case</span> 2 <span class="comment">% PSD</span>
0360             info{end+1,1} = <span class="string">'PSD'</span>;
0361             info{end+1,1} = <span class="string">' '</span>;
0362             
0363         <span class="keyword">case</span> 3 <span class="comment">% PSDJ</span>
0364             <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0365                 <span class="keyword">if</span> isfield(data.results,<span class="string">'invjoint'</span>)
0366                     invjoint = data.results.invjoint;
0367                     
0368                     info{end+1,1} = [<span class="string">'Inversion type: '</span>,data.invjoint.invtype];
0369                     info{end+1,1} = <span class="string">' '</span>;
0370                     <span class="keyword">switch</span> data.invjoint.geometry_type
0371                         <span class="keyword">case</span> <span class="string">'cyl'</span>
0372                             info{end+1,1} = [<span class="string">'Shape: '</span>,data.invjoint.geometry_type];
0373                             info{end+1,1} = [<span class="string">'Geom.: '</span>,sprintf(<span class="string">'%4.2f'</span>,invjoint.iGEOM.a)];
0374                         <span class="keyword">case</span> <span class="string">'ang'</span>
0375                             info{end+1,1} = [<span class="string">'Shape: '</span>,data.invjoint.geometry_type,<span class="string">' '</span>,<span class="keyword">...</span>
0376                                 num2str(invjoint.iGEOM.angles(1)),<span class="string">' '</span>,<span class="keyword">...</span>
0377                                 num2str(invjoint.iGEOM.angles(2)),<span class="string">' '</span>,<span class="keyword">...</span>
0378                                 num2str(invjoint.iGEOM.angles(3))];
0379                             info{end+1,1} = [<span class="string">'Geom.: '</span>,sprintf(<span class="string">'%4.2f'</span>,invjoint.iGEOM.a)];
0380                         <span class="keyword">case</span> <span class="string">'poly'</span>
0381                             info{end+1,1} = [<span class="string">'Shape: '</span>,data.invjoint.geometry_type,<span class="keyword">...</span>
0382                                 <span class="string">' '</span>,num2str(data.invjoint.polyN),<span class="string">' sides'</span>];
0383                             info{end+1,1} = [<span class="string">'Geom.: '</span>,sprintf(<span class="string">'%4.2f'</span>,invjoint.iGEOM.a)];
0384                     <span class="keyword">end</span>
0385                     info{end+1,1} = <span class="string">' '</span>;
0386                     info{end+1,1} = [<span class="string">'rho (INV): '</span>,sprintf(<span class="string">'%5.3f'</span>,invjoint.irho*1e6),<span class="string">' [µm/s]'</span>];
0387                     <span class="keyword">if</span> isfield(data.import,<span class="string">'NMRMOD'</span>)
0388                         info{end+1,1} = [<span class="string">'rho (MOD): '</span>,<span class="keyword">...</span>
0389                             sprintf(<span class="string">'%5.3f'</span>,data.import.NMRMOD.nmr.rho*1e6),<span class="string">' [µm/s]'</span>];
0390                     <span class="keyword">end</span>
0391                 <span class="keyword">end</span>
0392             <span class="keyword">end</span>
0393     <span class="keyword">end</span>
0394     <span class="comment">% and update the text box</span>
0395     set(gui.listbox_handles.info_dist,<span class="string">'String'</span>,info,<span class="string">'Value'</span>,[],<span class="string">'Max'</span>,2,<span class="string">'Min'</span>,0);
0396     
0397     <span class="comment">%% CPS panel info</span>
0398     <span class="comment">% check if the CPS panel is maximized</span>
0399     isminimized = get(gui.plots.CPSPanel,<span class="string">'Minimized'</span>);
0400     <span class="keyword">if</span> ~isminimized
0401         clear info;
0402         info{1,1} = <span class="string">' '</span>;
0403         <span class="keyword">if</span> isfield(data,<span class="string">'results'</span>)
0404             <span class="keyword">if</span> isfield(data.results,<span class="string">'invjoint'</span>)
0405                 invjoint = data.results.invjoint;
0406                 nmr = invjoint.idata.nmr;
0407                 levels = invjoint.levels;
0408                 
0409                 <span class="keyword">for</span> i = 1:numel(levels)
0410                     info{end+1,1} = nmr{levels(i)}.name;
0411                     info{end+1,1} = [<span class="string">'press. : '</span>,<span class="keyword">...</span>
0412                         sprintf(<span class="string">'%5.4f'</span>,invjoint.p0(levels(i))*data.pressure.unitfac),<span class="keyword">...</span>
0413                         <span class="string">' ['</span>,data.pressure.unit,<span class="string">']'</span>];
0414                     <span class="keyword">switch</span> invjoint.T1T2
0415                         <span class="keyword">case</span> <span class="string">'T1'</span>
0416                             info{end+1,1} = [<span class="string">'sat. (INV) : '</span>,<span class="keyword">...</span>
0417                                 sprintf(<span class="string">'%4.2f'</span>,invjoint.idata.nmr{levels(i)}.fit_g(end))];
0418                         <span class="keyword">case</span> <span class="string">'T2'</span>
0419                             info{end+1,1} = [<span class="string">'sat. (INV) : '</span>,<span class="keyword">...</span>
0420                                 sprintf(<span class="string">'%4.2f'</span>,invjoint.idata.nmr{levels(i)}.fit_g(1))];
0421                     <span class="keyword">end</span>
0422                     info{end+1,1} = [<span class="string">'sat. (MOD) : '</span>,<span class="keyword">...</span>
0423                         sprintf(<span class="string">'%4.2f'</span>,invjoint.S0(levels(i)))];
0424                     info{end+1,1} = <span class="string">' '</span>;
0425                 <span class="keyword">end</span>
0426             <span class="keyword">end</span>
0427         <span class="keyword">end</span>
0428         set(gui.listbox_handles.info_cps,<span class="string">'String'</span>,info,<span class="string">'Value'</span>,[],<span class="string">'Max'</span>,2,<span class="string">'Min'</span>,0);
0429     <span class="keyword">end</span>
0430     
0431     <span class="comment">% update GUI data</span>
0432     setappdata(fig,<span class="string">'data'</span>,data);
0433     setappdata(fig,<span class="string">'gui'</span>,gui);
0434 <span class="keyword">end</span>
0435 
0436 <span class="keyword">end</span>
0437 
0438 <span class="comment">%------------- END OF CODE --------------</span>
0439 
0440 <span class="comment">%% License:</span>
0441 <span class="comment">% MIT License</span>
0442 <span class="comment">%</span>
0443 <span class="comment">% Copyright (c) 2018 Thomas Hiller</span>
0444 <span class="comment">%</span>
0445 <span class="comment">% Permission is hereby granted, free of charge, to any person obtaining a copy</span>
0446 <span class="comment">% of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
0447 <span class="comment">% in the Software without restriction, including without limitation the rights</span>
0448 <span class="comment">% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
0449 <span class="comment">% copies of the Software, and to permit persons to whom the Software is</span>
0450 <span class="comment">% furnished to do so, subject to the following conditions:</span>
0451 <span class="comment">%</span>
0452 <span class="comment">% The above copyright notice and this permission notice shall be included in all</span>
0453 <span class="comment">% copies or substantial portions of the Software.</span>
0454 <span class="comment">%</span>
0455 <span class="comment">% THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
0456 <span class="comment">% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
0457 <span class="comment">% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
0458 <span class="comment">% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
0459 <span class="comment">% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
0460 <span class="comment">% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
0461 <span class="comment">% SOFTWARE.</span></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>