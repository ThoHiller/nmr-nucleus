<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ConductView</title>
  <meta name="keywords" content="ConductView">
  <meta name="description" content=" is an extra subGUI to visualize hydraulic conductivity">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
  <script type="text/javascript">
    if (top.frames.length == 0) { top.location = "../../../index.html"; };
  </script>
</head>
<body>
<a name="_top"></a>
<!-- # nucleus --><!-- # functions --><!-- menu.html interface -->
<h1>ConductView
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong> is an extra subGUI to visualize hydraulic conductivity</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function ConductView(src,~) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">ConductView is an extra subGUI to visualize hydraulic conductivity
estimates

 Syntax:
       ConductView(src)

 Inputs:
       src - handle of the calling object

 Outputs:
       none

 Example:
       ConductView

 Other m-files required:
       none

 Subfunctions:
       cv_onEditProp
       cv_onPopupUnit
       cv_onRadioMethod
       cv_updateAxes

 MAT-files required:
       none

 See also: NUCLEUSmod, NUCLEUSinv
 Author: see AUTHORS.md
 email: see AUTHORS.md
 License: MIT License (at end)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="checkIfInversionExists.html" class="code" title="function [foundINV,N] = checkIfInversionExists(INVdata)">checkIfInversionExists</a>	 checks if any inversion result is stored inside</li><li><a href="clearAllAxes.html" class="code" title="function clearAllAxes(figh)">clearAllAxes</a>	 clears all axes of a given figure</li><li><a href="../../../nucleus/functions/modeling/getConstants.html" class="code" title="function constants = getConstants">getConstants</a>	 provides some physical constants to the forward calculation</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../nucleus/callbacks/menus/onMenuViewFigures.html" class="code" title="function onMenuViewFigures(src,~)">onMenuViewFigures</a>	 handles the extra menu entries to show additional</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function cv_onEditProp(src,~)</a></li><li><a href="#_sub2" class="code">function cv_onPopupUnit(src,~)</a></li><li><a href="#_sub3" class="code">function cv_onRadioMethod(src,~)</a></li><li><a href="#_sub4" class="code">function cv_updateAxes(fig_conduct)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function ConductView(src,~)</a>
0002 <span class="comment">%ConductView is an extra subGUI to visualize hydraulic conductivity</span>
0003 <span class="comment">%estimates</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% Syntax:</span>
0006 <span class="comment">%       ConductView(src)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% Inputs:</span>
0009 <span class="comment">%       src - handle of the calling object</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% Outputs:</span>
0012 <span class="comment">%       none</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% Example:</span>
0015 <span class="comment">%       ConductView</span>
0016 <span class="comment">%</span>
0017 <span class="comment">% Other m-files required:</span>
0018 <span class="comment">%       none</span>
0019 <span class="comment">%</span>
0020 <span class="comment">% Subfunctions:</span>
0021 <span class="comment">%       cv_onEditProp</span>
0022 <span class="comment">%       cv_onPopupUnit</span>
0023 <span class="comment">%       cv_onRadioMethod</span>
0024 <span class="comment">%       cv_updateAxes</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% MAT-files required:</span>
0027 <span class="comment">%       none</span>
0028 <span class="comment">%</span>
0029 <span class="comment">% See also: NUCLEUSmod, NUCLEUSinv</span>
0030 <span class="comment">% Author: see AUTHORS.md</span>
0031 <span class="comment">% email: see AUTHORS.md</span>
0032 <span class="comment">% License: MIT License (at end)</span>
0033 
0034 <span class="comment">%------------- BEGIN CODE --------------</span>
0035 
0036 <span class="comment">%% get GUI handle and data</span>
0037 fig = ancestor(src,<span class="string">'figure'</span>,<span class="string">'toplevel'</span>);
0038 fig_tag = get(fig,<span class="string">'Tag'</span>);
0039 nucleus.data = getappdata(fig,<span class="string">'data'</span>);
0040 nucleus.gui = getappdata(fig,<span class="string">'gui'</span>);
0041 colors = nucleus.gui.myui.colors;
0042 
0043 showplot = false;
0044 
0045 <span class="comment">% gather data depending on figure tag</span>
0046 <span class="keyword">switch</span> fig_tag
0047     <span class="keyword">case</span> <span class="string">'INV'</span>
0048         INVdata = getappdata(fig,<span class="string">'INVdata'</span>);
0049         [foundINV,~] = <a href="checkIfInversionExists.html" class="code" title="function [foundINV,N] = checkIfInversionExists(INVdata)">checkIfInversionExists</a>(INVdata);
0050         
0051         <span class="keyword">if</span> foundINV
0052             tolKrel = 0.999;
0053             geom_type = INVdata{1}.invjoint.geometry_type;
0054             constants = <a href="../../../nucleus/functions/modeling/getConstants.html" class="code" title="function constants = getConstants">getConstants</a>;
0055             <span class="keyword">if</span> isfield(nucleus.data.results,<span class="string">'invjoint'</span>)
0056                 colors.CPS = colors.BoxCPS;
0057                 constants.porosity = INVdata{1}.invstd.porosity;
0058                 constants.tortuosity = 1;
0059                 pSAT = nucleus.data.results.invjoint.pSAT;
0060                 showplot = true;
0061             <span class="keyword">end</span>
0062         <span class="keyword">end</span>
0063         
0064     <span class="keyword">case</span> <span class="string">'MOD'</span>
0065         tolKrel = 0.9999;
0066         geom_type = nucleus.data.geometry.type;
0067         constants = nucleus.data.results.constants;
0068         constants.porosity = nucleus.data.nmr.porosity;
0069         constants.tortuosity = 1;
0070         pSAT = nucleus.data.results.SAT;
0071         showplot = true;
0072 <span class="keyword">end</span>
0073 
0074 <span class="comment">% now plot the CONDUCT gui</span>
0075 <span class="keyword">if</span> showplot
0076     <span class="comment">% prepare neccesary gui data</span>
0077     data.constants = constants;
0078     data.geom_type = geom_type;
0079     data.myui = nucleus.gui.myui;
0080     data.tolKrel = tolKrel;
0081     data.cond_unit = 1;
0082     data.perm_unit = 1;
0083     data.SAT = pSAT;
0084     
0085     <span class="comment">% check if the figure is already open</span>
0086     fig_conduct = findobj(<span class="string">'Tag'</span>,<span class="string">'CONDUCT'</span>);
0087     <span class="comment">% if not, create it</span>
0088     <span class="keyword">if</span> isempty(fig_conduct)
0089         <span class="comment">% draw the figure on top of NUCLEUS</span>
0090         fig_conduct = figure(<span class="string">'Name'</span>,<span class="string">'NUCLEUS - ConductView'</span>,<span class="keyword">...</span>
0091             <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>,<span class="string">'ToolBar'</span>,<span class="string">'none'</span>,<span class="string">'Tag'</span>,<span class="string">'CONDUCT'</span>);
0092         pos0 = get(fig,<span class="string">'Position'</span>);
0093         pos1 = get(fig_conduct,<span class="string">'Position'</span>);
0094         cent(1) = (pos0(1)+pos0(3)/2);
0095         cent(2) = (pos0(2)+pos0(4)/2);
0096         set(fig_conduct,<span class="string">'Position'</span>,[cent(1)-pos0(3)/3 pos0(2) pos0(3)/1.5 pos0(4)]);
0097         
0098         <span class="comment">% create the layout</span>
0099         gui.main = uix.HBox(<span class="string">'Parent'</span>,fig_conduct,<span class="keyword">...</span>
0100             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,5,<span class="string">'Padding'</span>,5);
0101         <span class="comment">% control panel</span>
0102         gui.col1 = uix.VBox(<span class="string">'Parent'</span>,gui.main,<span class="keyword">...</span>
0103             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,5);
0104         <span class="comment">% axes panel</span>
0105         gui.col2 = uix.CardPanel(<span class="string">'Parent'</span>,gui.main,<span class="keyword">...</span>
0106             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0107         set(gui.main,<span class="string">'Width'</span>,[200 -1]);
0108         
0109         <span class="comment">% axes inside uicontainers</span>
0110         <span class="keyword">for</span> i = 1:6
0111             gui.card(i) = uicontainer(<span class="string">'Parent'</span>,gui.col2,<span class="keyword">...</span>
0112                 <span class="string">'BackGroundColor'</span>,colors.panelBG);
0113             gui.ax(i) = axes(<span class="string">'Parent'</span>,gui.card(i),<span class="string">'Color'</span>,colors.axisBG,<span class="keyword">...</span>
0114                 <span class="string">'XColor'</span>,colors.axisFG,<span class="string">'YColor'</span>,colors.axisFG,<span class="keyword">...</span>
0115                 <span class="string">'FontSize'</span>,12);
0116         <span class="keyword">end</span>
0117         
0118         <span class="comment">% control boxes</span>
0119         uix.Empty(<span class="string">'Parent'</span>,gui.col1);
0120         gui.panels.method = uix.BoxPanel(<span class="string">'Parent'</span>,gui.col1,<span class="string">'Title'</span>,<span class="string">'Upscaling Method'</span>,<span class="keyword">...</span>
0121             <span class="string">'TitleColor'</span>,colors.CPS,<span class="string">'ForegroundColor'</span>,colors.BoxTitle);
0122         gui.panels.type = uix.BoxPanel(<span class="string">'Parent'</span>,gui.col1,<span class="string">'Title'</span>,<span class="string">'Plot Type'</span>,<span class="keyword">...</span>
0123             <span class="string">'TitleColor'</span>,colors.CPS,<span class="string">'ForegroundColor'</span>,colors.BoxTitle);
0124         gui.panels.prop = uix.BoxPanel(<span class="string">'Parent'</span>,gui.col1,<span class="string">'Title'</span>,<span class="string">'Properties'</span>,<span class="keyword">...</span>
0125             <span class="string">'TitleColor'</span>,colors.CPS,<span class="string">'ForegroundColor'</span>,colors.BoxTitle);
0126         uix.Empty(<span class="string">'Parent'</span>,gui.col1);
0127         set(gui.col1,<span class="string">'Heights'</span>,[-1 100 175 210 -1]);
0128         
0129         <span class="comment">% vboxes inside panels</span>
0130         gui.vbox1 = uix.VBox(<span class="string">'Parent'</span>,gui.panels.method,<span class="keyword">...</span>
0131             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0132         gui.vbox2 = uix.VBox(<span class="string">'Parent'</span>,gui.panels.type,<span class="keyword">...</span>
0133             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0134         gui.vbox3 = uix.VBox(<span class="string">'Parent'</span>,gui.panels.prop,<span class="keyword">...</span>
0135             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0136         
0137         <span class="comment">% radio buttons inside 1. box</span>
0138         gui.radio.coord = [1 1];
0139         <span class="comment">% parallel connection</span>
0140         gui.radio.pc = uicontrol(<span class="string">'Parent'</span>,gui.vbox1,<span class="keyword">...</span>
0141             <span class="string">'Style'</span>,<span class="string">'radiobutton'</span>,<span class="string">'String'</span>,<span class="string">'parallel connection'</span>,<span class="keyword">...</span>
0142             <span class="string">'Tag'</span>,<span class="string">'method'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0143             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0144             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0145             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Value'</span>,1,<span class="string">'Callback'</span>,@<a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>);
0146         <span class="comment">% effective capillary</span>
0147         gui.radio.eff = uicontrol(<span class="string">'Parent'</span>,gui.vbox1,<span class="keyword">...</span>
0148             <span class="string">'Style'</span>,<span class="string">'radiobutton'</span>,<span class="string">'String'</span>,<span class="string">'effective capillary'</span>,<span class="keyword">...</span>
0149             <span class="string">'Tag'</span>,<span class="string">'method'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0150             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0151             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0152             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>);
0153         
0154         <span class="comment">% radio buttons inside 2. box</span>
0155         <span class="comment">% hydraulic conductivity</span>
0156         gui.radio.cond = uicontrol(<span class="string">'Parent'</span>,gui.vbox2,<span class="keyword">...</span>
0157             <span class="string">'Style'</span>,<span class="string">'radiobutton'</span>,<span class="string">'String'</span>,<span class="string">'hydraulic conductivity'</span>,<span class="keyword">...</span>
0158             <span class="string">'Tag'</span>,<span class="string">'type'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0159             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0160             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0161             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Value'</span>,1,<span class="string">'Callback'</span>,@<a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>);
0162         gui.hbox10 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox2,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,4,<span class="string">'Padding'</span>,2);
0163         uix.Empty(<span class="string">'Parent'</span>,gui.hbox10);
0164         gui.popup.cond = uicontrol(<span class="string">'Parent'</span>,gui.hbox10,<span class="keyword">...</span>
0165             <span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="string">'String'</span>,{<span class="string">'m/s'</span>,<span class="string">'cm/d'</span>},<span class="keyword">...</span>
0166             <span class="string">'Tag'</span>,<span class="string">'cond'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0167             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0168             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0169             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Value'</span>,1,<span class="string">'Callback'</span>,@<a href="#_sub2" class="code" title="subfunction cv_onPopupUnit(src,~)">cv_onPopupUnit</a>);
0170         gui.text.cond_unit = uicontrol(<span class="string">'Parent'</span>,gui.hbox10,<span class="keyword">...</span>
0171             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="keyword">...</span>
0172             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0173             <span class="string">'String'</span>,<span class="string">'unit'</span>);
0174         uix.Empty(<span class="string">'Parent'</span>,gui.hbox10);
0175         set(gui.hbox10,<span class="string">'Widths'</span>,[25 -3 -3 -1]);
0176         <span class="comment">% permeability</span>
0177         gui.radio.perm = uicontrol(<span class="string">'Parent'</span>,gui.vbox2,<span class="keyword">...</span>
0178             <span class="string">'Style'</span>,<span class="string">'radiobutton'</span>,<span class="string">'String'</span>,<span class="string">'permeability'</span>,<span class="keyword">...</span>
0179             <span class="string">'Tag'</span>,<span class="string">'type'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0180             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0181             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0182             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>);
0183         gui.hbox11 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox2,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,4,<span class="string">'Padding'</span>,2);
0184         uix.Empty(<span class="string">'Parent'</span>,gui.hbox11);
0185         gui.popup.perm = uicontrol(<span class="string">'Parent'</span>,gui.hbox11,<span class="keyword">...</span>
0186             <span class="string">'Style'</span>,<span class="string">'popupmenu'</span>,<span class="string">'String'</span>,{<span class="string">'m²'</span>,<span class="string">'D'</span>,<span class="string">'mD'</span>},<span class="keyword">...</span>
0187             <span class="string">'Tag'</span>,<span class="string">'perm'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0188             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0189             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0190             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Value'</span>,1,<span class="string">'Callback'</span>,@<a href="#_sub2" class="code" title="subfunction cv_onPopupUnit(src,~)">cv_onPopupUnit</a>);
0191         gui.text.perm_unit = uicontrol(<span class="string">'Parent'</span>,gui.hbox11,<span class="keyword">...</span>
0192             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="keyword">...</span>
0193             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0194             <span class="string">'String'</span>,<span class="string">'unit'</span>);
0195         uix.Empty(<span class="string">'Parent'</span>,gui.hbox11);
0196         set(gui.hbox11,<span class="string">'Widths'</span>,[25 -3 -3 -1]);
0197         <span class="comment">% relative cond / perm</span>
0198         gui.radio.rel = uicontrol(<span class="string">'Parent'</span>,gui.vbox2,<span class="keyword">...</span>
0199             <span class="string">'Style'</span>,<span class="string">'radiobutton'</span>,<span class="string">'String'</span>,<span class="string">'relative cond / perm [-]'</span>,<span class="keyword">...</span>
0200             <span class="string">'Tag'</span>,<span class="string">'type'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0201             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="keyword">...</span><span class="comment">.</span>
0202             <span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0203             <span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>);
0204         
0205         <span class="comment">% horizontal boxes inside 3. box</span>
0206         gui.hbox1 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox3,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0207         gui.hbox2 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox3,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0208         gui.hbox3 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox3,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0209         uix.Empty(<span class="string">'Parent'</span>,gui.vbox3);
0210         gui.hbox4 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox3,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0211         gui.hbox5 = uix.HBox(<span class="string">'Parent'</span>,gui.vbox3,<span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'Spacing'</span>,2,<span class="string">'Padding'</span>,2);
0212         set(gui.vbox3,<span class="string">'Heights'</span>,[-4 -4 -4 -1 -4 -4]);
0213         
0214         <span class="comment">% gravitational acceleration [m/s²]</span>
0215         gui.edit.gravity = uicontrol(<span class="string">'Parent'</span>,gui.hbox1,<span class="keyword">...</span>
0216             <span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'String'</span>,num2str(constants.gravity),<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0217             <span class="string">'BackGroundColor'</span>,colors.editBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0218             <span class="string">'Tag'</span>,<span class="string">'gravity'</span>,<span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub1" class="code" title="subfunction cv_onEditProp(src,~)">cv_onEditProp</a>);
0219         gui.text.gravity = uicontrol(<span class="string">'Parent'</span>,gui.hbox1,<span class="keyword">...</span>
0220             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="keyword">...</span>
0221             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0222             <span class="string">'String'</span>,<span class="string">'grav. acc. [m/s²]'</span>);
0223         <span class="comment">% density [kg/m³]</span>
0224         gui.edit.dens = uicontrol(<span class="string">'Parent'</span>,gui.hbox2,<span class="keyword">...</span>
0225             <span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'String'</span>,num2str(constants.density),<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0226             <span class="string">'BackGroundColor'</span>,colors.editBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0227             <span class="string">'Tag'</span>,<span class="string">'dens'</span>,<span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub1" class="code" title="subfunction cv_onEditProp(src,~)">cv_onEditProp</a>);
0228         gui.text.dens = uicontrol(<span class="string">'Parent'</span>,gui.hbox2,<span class="keyword">...</span>
0229             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="keyword">...</span>
0230             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0231             <span class="string">'String'</span>,<span class="string">'density [kg/m³]'</span>);
0232         <span class="comment">% dynamic viscosity [Pa s]</span>
0233         gui.edit.dyn = uicontrol(<span class="string">'Parent'</span>,gui.hbox3,<span class="keyword">...</span>
0234             <span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'String'</span>,num2str(constants.dynvisc),<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0235             <span class="string">'BackGroundColor'</span>,colors.editBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0236             <span class="string">'Tag'</span>,<span class="string">'dyn'</span>,<span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub1" class="code" title="subfunction cv_onEditProp(src,~)">cv_onEditProp</a>);
0237         gui.text.dyn = uicontrol(<span class="string">'Parent'</span>,gui.hbox3,<span class="keyword">...</span>
0238             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="keyword">...</span>
0239             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0240             <span class="string">'String'</span>,<span class="string">'dyn. visc. [Pa s]'</span>);
0241         <span class="comment">% edit and text fields for different properties</span>
0242         <span class="comment">% porosity [-]</span>
0243         gui.edit.poro = uicontrol(<span class="string">'Parent'</span>,gui.hbox4,<span class="keyword">...</span>
0244             <span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'String'</span>,num2str(constants.porosity),<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0245             <span class="string">'BackGroundColor'</span>,colors.editBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0246             <span class="string">'Tag'</span>,<span class="string">'poro'</span>,<span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub1" class="code" title="subfunction cv_onEditProp(src,~)">cv_onEditProp</a>);
0247         gui.text.poro = uicontrol(<span class="string">'Parent'</span>,gui.hbox4,<span class="keyword">...</span>
0248             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="keyword">...</span>
0249             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0250             <span class="string">'String'</span>,<span class="string">'porosity [-]'</span>);
0251         <span class="comment">% edit and text fields for different properties</span>
0252         <span class="comment">% porosity [-]</span>
0253         gui.edit.tort = uicontrol(<span class="string">'Parent'</span>,gui.hbox5,<span class="keyword">...</span>
0254             <span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'String'</span>,num2str(constants.tortuosity),<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="keyword">...</span>
0255             <span class="string">'BackGroundColor'</span>,colors.editBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0256             <span class="string">'Tag'</span>,<span class="string">'tort'</span>,<span class="string">'Enable'</span>,<span class="string">'on'</span>,<span class="string">'Callback'</span>,@<a href="#_sub1" class="code" title="subfunction cv_onEditProp(src,~)">cv_onEditProp</a>);
0257         gui.text.tort = uicontrol(<span class="string">'Parent'</span>,gui.hbox5,<span class="keyword">...</span>
0258             <span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'FontSize'</span>,nucleus.gui.myui.fontsize,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="keyword">...</span>
0259             <span class="string">'BackGroundColor'</span>,colors.panelBG,<span class="string">'ForeGroundColor'</span>,colors.panelFG,<span class="keyword">...</span>
0260             <span class="string">'String'</span>,<span class="string">'tortuosity [-]'</span>);
0261         <span class="comment">% adjust the boxes</span>
0262         set(gui.hbox1,<span class="string">'Width'</span>,[-1 -1.5]);
0263         set(gui.hbox2,<span class="string">'Width'</span>,[-1 -1.5]);
0264         set(gui.hbox3,<span class="string">'Width'</span>,[-1 -1.5]);
0265         set(gui.hbox4,<span class="string">'Width'</span>,[-1 -1.5]);
0266         set(gui.hbox5,<span class="string">'Width'</span>,[-1 -1.5]);
0267         <span class="comment">% adjust the text fields</span>
0268         jh = findjobj(gui.text.cond_unit);
0269         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0270         jh = findjobj(gui.text.perm_unit);
0271         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0272         jh = findjobj(gui.text.gravity);
0273         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0274         jh = findjobj(gui.text.dens);
0275         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0276         jh = findjobj(gui.text.dyn);
0277         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0278         jh = findjobj(gui.text.poro);
0279         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0280         h = findjobj(gui.text.tort);
0281         jh.setVerticalAlignment(javax.swing.JLabel.CENTER);
0282         
0283         <span class="comment">% store some main GUI settings</span>
0284         gui.myui = nucleus.gui.myui;
0285         <span class="comment">% save to GUI</span>
0286         setappdata(fig_conduct,<span class="string">'gui'</span>,gui);
0287     <span class="keyword">else</span>
0288         <span class="comment">% if the figure is already open load the GUI data</span>
0289         gui = getappdata(fig_conduct,<span class="string">'gui'</span>);
0290         <span class="comment">% clear all axes</span>
0291         <a href="clearAllAxes.html" class="code" title="function clearAllAxes(figh)">clearAllAxes</a>(fig_conduct);
0292         <span class="comment">% set default radio buttons</span>
0293         gui.radio.coord = [1 1];
0294         set(gui.radio.pc,<span class="string">'Value'</span>,1);
0295         set(gui.radio.cond,<span class="string">'Value'</span>,1);
0296         <a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>(gui.radio.pc);
0297         <a href="#_sub3" class="code" title="subfunction cv_onRadioMethod(src,~)">cv_onRadioMethod</a>(gui.radio.cond);
0298         <span class="comment">% set unit popup menus</span>
0299         set(gui.popup.cond,<span class="string">'Value'</span>,1);
0300         set(gui.popup.perm,<span class="string">'Value'</span>,1);        
0301         <span class="comment">% set properties (may have changed)</span>
0302         set(gui.edit.poro,<span class="string">'String'</span>,num2str(constants.porosity));
0303         set(gui.edit.gravity,<span class="string">'String'</span>,num2str(constants.gravity));
0304         set(gui.edit.dens,<span class="string">'String'</span>,num2str(constants.density));
0305         set(gui.edit.dyn,<span class="string">'String'</span>,num2str(constants.dynvisc));
0306         set(gui.edit.tort,<span class="string">'String'</span>,num2str(constants.tortuosity));
0307     <span class="keyword">end</span>
0308     <span class="comment">% save to GUI</span>
0309     setappdata(fig_conduct,<span class="string">'data'</span>,data);
0310     <span class="comment">% plot the data</span>
0311     <a href="#_sub4" class="code" title="subfunction cv_updateAxes(fig_conduct)">cv_updateAxes</a>(fig_conduct);
0312     <span class="comment">% make the axes visible</span>
0313     set(gui.col2,<span class="string">'Selection'</span>,1,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0314 <span class="keyword">else</span>
0315     helpdlg({<span class="string">'function: showConduct'</span>,<span class="keyword">...</span>
0316         <span class="string">'Cannot continue because there is no data.'</span>},<span class="keyword">...</span>
0317         <span class="string">'Not enough data to show'</span>);
0318 <span class="keyword">end</span>
0319 
0320 <span class="keyword">end</span>
0321 
0322 <span class="comment">%%</span>
0323 <a name="_sub1" href="#_subfunctions" class="code">function cv_onEditProp(src,~)</a>
0324 fig_conduct = ancestor(src,<span class="string">'figure'</span>,<span class="string">'toplevel'</span>);
0325 gui = getappdata(fig_conduct,<span class="string">'gui'</span>);
0326 data = getappdata(fig_conduct,<span class="string">'data'</span>);
0327 
0328 val = str2double(get(src,<span class="string">'String'</span>));
0329 
0330 <span class="keyword">switch</span> get(src,<span class="string">'Tag'</span>)
0331     <span class="keyword">case</span> <span class="string">'poro'</span>
0332         <span class="comment">% check that porosity stays within limits</span>
0333         <span class="keyword">if</span> val &lt;= 0 || val &gt; 1
0334             val = 1;
0335             set(src,<span class="string">'String'</span>,num2str(val));
0336         <span class="keyword">end</span>
0337         data.constants.porosity = val;
0338     <span class="keyword">case</span> <span class="string">'gravity'</span>
0339         data.constants.gravity = val;
0340     <span class="keyword">case</span> <span class="string">'dens'</span>
0341         data.constants.density = val;
0342     <span class="keyword">case</span> <span class="string">'dyn'</span>
0343         data.constants.dynvisc = val;
0344     <span class="keyword">case</span> <span class="string">'tort'</span>
0345         data.constants.tortuosity = val;
0346 <span class="keyword">end</span>
0347 setappdata(fig_conduct,<span class="string">'data'</span>,data);
0348 <a href="#_sub4" class="code" title="subfunction cv_updateAxes(fig_conduct)">cv_updateAxes</a>(fig_conduct);
0349 
0350 <span class="keyword">end</span>
0351 
0352 <span class="comment">%%</span>
0353 <a name="_sub2" href="#_subfunctions" class="code">function cv_onPopupUnit(src,~)</a>
0354 fig_conduct = ancestor(src,<span class="string">'figure'</span>,<span class="string">'toplevel'</span>);
0355 data = getappdata(fig_conduct,<span class="string">'data'</span>);
0356 gui = getappdata(fig_conduct,<span class="string">'gui'</span>);
0357 
0358 <span class="comment">% check which popup menu was selected</span>
0359 <span class="comment">% and set the corresponding unit</span>
0360 <span class="keyword">switch</span> get(src,<span class="string">'Tag'</span>)
0361     <span class="keyword">case</span> <span class="string">'cond'</span>
0362         data.cond_unit = get(src,<span class="string">'Value'</span>); 
0363     <span class="keyword">case</span> <span class="string">'perm'</span>
0364         data.perm_unit = get(src,<span class="string">'Value'</span>);
0365 <span class="keyword">end</span>
0366 <span class="comment">% update gui data</span>
0367 setappdata(fig_conduct,<span class="string">'data'</span>,data);
0368 setappdata(fig_conduct,<span class="string">'gui'</span>,gui);
0369 
0370 <span class="comment">% get the id of the current visible plot</span>
0371 id = get(gui.col2,<span class="string">'Selection'</span>);
0372 <span class="comment">% update all plots</span>
0373 <a href="#_sub4" class="code" title="subfunction cv_updateAxes(fig_conduct)">cv_updateAxes</a>(fig_conduct)
0374 <span class="comment">% show the current visible plot again</span>
0375 set(gui.col2,<span class="string">'Selection'</span>,id);
0376 
0377 <span class="keyword">end</span>
0378 
0379 <span class="comment">%%</span>
0380 <a name="_sub3" href="#_subfunctions" class="code">function cv_onRadioMethod(src,~)</a>
0381 fig_conduct = ancestor(src,<span class="string">'figure'</span>,<span class="string">'toplevel'</span>);
0382 gui = getappdata(fig_conduct,<span class="string">'gui'</span>);
0383 
0384 <span class="comment">% check which radiobutton was selected</span>
0385 <span class="keyword">switch</span> get(src,<span class="string">'Tag'</span>)
0386     <span class="keyword">case</span> <span class="string">'method'</span>
0387         <span class="keyword">switch</span> get(src,<span class="string">'String'</span>)
0388             <span class="keyword">case</span> <span class="string">'parallel connection'</span>
0389                 gui.radio.coord(2) = 1;
0390                 set(src,<span class="string">'Value'</span>,1);
0391                 set(gui.radio.eff,<span class="string">'Value'</span>,0);
0392             <span class="keyword">case</span> <span class="string">'effective capillary'</span>
0393                 gui.radio.coord(2) = 2;
0394                 set(src,<span class="string">'Value'</span>,1);
0395                 set(gui.radio.pc,<span class="string">'Value'</span>,0);
0396         <span class="keyword">end</span>        
0397     <span class="keyword">case</span> <span class="string">'type'</span>
0398         <span class="keyword">switch</span> get(src,<span class="string">'String'</span>)
0399             <span class="keyword">case</span> <span class="string">'hydraulic conductivity'</span>
0400                 gui.radio.coord(1) = 1;
0401                 set(src,<span class="string">'Value'</span>,1);
0402                 set(gui.radio.perm,<span class="string">'Value'</span>,0);
0403                 set(gui.radio.rel,<span class="string">'Value'</span>,0);
0404             <span class="keyword">case</span> <span class="string">'permeability'</span>
0405                 gui.radio.coord(1) = 2;
0406                 set(src,<span class="string">'Value'</span>,1);
0407                 set(gui.radio.cond,<span class="string">'Value'</span>,0);
0408                 set(gui.radio.rel,<span class="string">'Value'</span>,0);
0409             <span class="keyword">case</span> <span class="string">'relative cond / perm [-]'</span>
0410                 gui.radio.coord(1) = 3;
0411                 set(src,<span class="string">'Value'</span>,1);
0412                 set(gui.radio.cond,<span class="string">'Value'</span>,0);
0413                 set(gui.radio.perm,<span class="string">'Value'</span>,0);
0414         <span class="keyword">end</span>
0415 <span class="keyword">end</span>
0416 <span class="comment">% update gui data</span>
0417 setappdata(fig_conduct,<span class="string">'gui'</span>,gui);
0418 
0419 <span class="comment">% activate selected card panel</span>
0420 id = 3*(gui.radio.coord(2)-1)+gui.radio.coord(1);
0421 set(gui.col2,<span class="string">'Selection'</span>,id);
0422 
0423 <span class="keyword">end</span>
0424 
0425 <span class="comment">%%</span>
0426 <a name="_sub4" href="#_subfunctions" class="code">function cv_updateAxes(fig_conduct)</a>
0427 gui = getappdata(fig_conduct,<span class="string">'gui'</span>);
0428 data = getappdata(fig_conduct,<span class="string">'data'</span>);
0429 colors = gui.myui.colors;
0430 
0431 <span class="comment">% get unit for hydraulic conductivity</span>
0432 <span class="keyword">if</span> data.cond_unit == 1
0433     unitfak_1 = 1; <span class="comment">% [m/s]</span>
0434     unitstr_1 = <span class="string">'[m/s]'</span>;
0435 <span class="keyword">else</span>
0436     unitfak_1 = 8.64e6; <span class="comment">% [cm/d]</span>
0437     unitstr_1 = <span class="string">'[cm/d]'</span>;
0438 <span class="keyword">end</span>
0439 ylstr_1 = [<span class="string">'hydraulic conductivity '</span>,unitstr_1];
0440 
0441 <span class="comment">% get unit for permeability</span>
0442 <span class="keyword">if</span> data.perm_unit == 1
0443     unitfak_2 = 1; <span class="comment">% [m^2]</span>
0444     unitstr_2 = <span class="string">'[m²]'</span>;
0445 <span class="keyword">elseif</span> data.perm_unit == 2
0446     unitfak_2 = (1/9.86923e-13); <span class="comment">% [D] Darcy</span>
0447     unitstr_2 = <span class="string">'[D]'</span>;
0448 <span class="keyword">else</span>
0449     unitfak_2 = (1/9.86923e-16); <span class="comment">% [mD] miili Darcy</span>
0450     unitstr_2 = <span class="string">'[mD]'</span>;
0451 <span class="keyword">end</span>
0452 ylstr_2 = [<span class="string">'permeability '</span>,unitstr_2];
0453 
0454 <span class="comment">% gather parameters</span>
0455 tolKrel = data.tolKrel;
0456 constants = data.constants;
0457 permfak = constants.dynvisc / constants.density / constants.gravity;
0458 porofak = constants.porosity / constants.tortuosity;
0459 SAT = data.SAT;
0460 <span class="comment">% &quot;color brewer&quot; colors</span>
0461 coldrain = [0.2157 0.4941 0.7216]; <span class="comment">% blue</span>
0462 colimb = [0.8941 0.1020 0.1098]; <span class="comment">% red</span>
0463 
0464 <span class="comment">% clear and hold all axes</span>
0465 <span class="keyword">for</span> i = 1:6
0466     cla(gui.ax(i))
0467     hold(gui.ax(i),<span class="string">'on'</span>);
0468 <span class="keyword">end</span>
0469 
0470 <span class="comment">% plot data</span>
0471 <span class="comment">% pc - cond</span>
0472 KSpc = max(unitfak_1*porofak*SAT.Kdfull(SAT.Sdfull==1));
0473 <span class="keyword">if</span> isempty(KSpc)
0474     KSpc = max(unitfak_1*porofak*SAT.Kdfull(SAT.Sdfull==max(SAT.Sdfull)));
0475 <span class="keyword">end</span>
0476 <span class="keyword">switch</span> data.geom_type
0477     <span class="keyword">case</span> <span class="string">'cyl'</span>
0478         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kdfull,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0479             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(1));
0480         plot(SAT.Sifull,unitfak_1*porofak*SAT.Kifull,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0481             <span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'Parent'</span>,gui.ax(1));
0482     <span class="keyword">otherwise</span>
0483         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kdfull,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0484             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(1));
0485         plot(SAT.Sifull,unitfak_1*porofak*SAT.Kifull,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0486             <span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'Parent'</span>,gui.ax(1));
0487 <span class="keyword">end</span>
0488 ymin = min([unitfak_1*porofak*SAT.Kdfull;unitfak_1*porofak*SAT.Kifull]);
0489 ymax = max([unitfak_1*porofak*SAT.Kdfull;unitfak_1*porofak*SAT.Kifull]);
0490 ymin = 10^floor(log10(ymin));
0491 ymax = 10^ceil(log10(ymax));
0492 set(gui.ax(1),<span class="string">'YLim'</span>,[ymin ymax]);
0493 lgh = legend(gui.ax(1),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0494 set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0495 
0496 <span class="comment">% pc - perm</span>
0497 kSpc = max(unitfak_2*permfak*porofak*SAT.Kdfull(SAT.Sdfull==1));
0498 <span class="keyword">if</span> isempty(kSpc)
0499     kSpc = max(unitfak_2*permfak*porofak*SAT.Kdfull(SAT.Sdfull==max(SAT.Sdfull)));
0500 <span class="keyword">end</span>
0501 <span class="keyword">switch</span> data.geom_type
0502     <span class="keyword">case</span> <span class="string">'cyl'</span>
0503         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kdfull.*permfak,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0504             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(2));
0505         plot(SAT.Sifull,unitfak_2*porofak*SAT.Kifull.*permfak,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0506             <span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'Parent'</span>,gui.ax(2));
0507     <span class="keyword">otherwise</span>
0508         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kdfull.*permfak,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0509             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(2));
0510         plot(SAT.Sifull,unitfak_2*porofak*SAT.Kifull.*permfak,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0511             <span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'Parent'</span>,gui.ax(2));
0512 <span class="keyword">end</span>
0513 ymin = min([unitfak_2*porofak*SAT.Kdfull.*permfak;unitfak_2*porofak*SAT.Kifull.*permfak]);
0514 ymax = max([unitfak_2*porofak*SAT.Kdfull.*permfak;unitfak_2*porofak*SAT.Kifull.*permfak]);
0515 ymin = 10^floor(log10(ymin));
0516 ymax = 10^ceil(log10(ymax));
0517 set(gui.ax(2),<span class="string">'YLim'</span>,[ymin ymax]);
0518 lgh = legend(gui.ax(2),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0519 set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0520 
0521 <span class="comment">% pc - rel</span>
0522 rel1 = SAT.Kdfull/SAT.Kdfull(find(SAT.Sdfull&lt;tolKrel,1));
0523 rel2 = SAT.Kifull/SAT.Kifull(find(SAT.Sifull&lt;tolKrel,1));
0524 <span class="keyword">switch</span> data.geom_type
0525     <span class="keyword">case</span> <span class="string">'cyl'</span>
0526         plot(SAT.Sdfull,rel1,<span class="string">'Color'</span>,coldrain,<span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(3));
0527         plot(SAT.Sifull,rel2,<span class="string">'Color'</span>,colimb,<span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'Parent'</span>,gui.ax(3));
0528     <span class="keyword">otherwise</span>
0529         plot(SAT.Sdfull,rel1,<span class="string">'Color'</span>,coldrain,<span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(3));
0530         plot(SAT.Sifull,rel2,<span class="string">'Color'</span>,colimb,<span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'Parent'</span>,gui.ax(3));
0531 <span class="keyword">end</span>
0532 ymin = min([rel1; rel2]);
0533 ymin = 10^floor(log10(ymin));
0534 set(gui.ax(3),<span class="string">'YLim'</span>,[ymin 1]);
0535 lgh = legend(gui.ax(3),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0536 set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0537 
0538 <span class="comment">% eff - cond</span>
0539 KSeff = max(unitfak_1*porofak*SAT.Kd_eff(SAT.Sdfull==1));
0540 <span class="keyword">if</span> isempty(KSeff)
0541     KSeff = max(unitfak_1*porofak*SAT.Kd_eff(SAT.Sdfull==max(SAT.Sdfull)));
0542 <span class="keyword">end</span>
0543 <span class="keyword">switch</span> data.geom_type
0544     <span class="keyword">case</span> <span class="string">'cyl'</span>
0545         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kd_eff,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0546             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0547         plot(SAT.Sifull,unitfak_1*porofak*SAT.Ki_eff,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0548             <span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0549         lgh = legend(gui.ax(4),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0550         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0551     <span class="keyword">otherwise</span>
0552         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kd_ducts,<span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="keyword">...</span>
0553             <span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0554         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kd_corners,<span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="keyword">...</span>
0555             <span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0556         plot(SAT.Sdfull,unitfak_1*porofak*SAT.Kd_eff,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0557             <span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0558         plot(SAT.Sifull,unitfak_1*porofak*SAT.Ki_ducts,<span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="keyword">...</span>
0559             <span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0560         plot(SAT.Sifull,unitfak_1*porofak*SAT.Ki_corners,<span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="keyword">...</span>
0561             <span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0562         plot(SAT.Sifull,unitfak_1*porofak*SAT.Ki_eff,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0563             <span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(4));
0564         lgh = legend(gui.ax(4),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0565         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0566         lgh.NumColumns = 2;
0567         lgh.Title.String = <span class="string">'drain             imb'</span>;
0568 <span class="keyword">end</span>
0569 ymin = min([unitfak_1*porofak*SAT.Kd_eff';unitfak_1*porofak*SAT.Ki_eff']);
0570 ymax = max([unitfak_1*porofak*SAT.Kd_eff';unitfak_1*porofak*SAT.Ki_eff']);
0571 ymin = 10^floor(log10(ymin));
0572 ymax = 10^ceil(log10(ymax));
0573 set(gui.ax(4),<span class="string">'YLim'</span>,[ymin ymax]);
0574 
0575 
0576 <span class="comment">% eff - perm</span>
0577 kSeff = max(unitfak_2*permfak*porofak*SAT.Kd_eff(SAT.Sdfull==1));
0578 <span class="keyword">if</span> isempty(kSeff)
0579     kSeff = max(unitfak_2*permfak*porofak*SAT.Kd_eff(SAT.Sdfull==max(SAT.Sdfull)));
0580 <span class="keyword">end</span>
0581 <span class="keyword">switch</span> data.geom_type
0582     <span class="keyword">case</span> <span class="string">'cyl'</span>
0583         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kd_eff.*permfak,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0584             <span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0585         plot(SAT.Sifull,unitfak_2*porofak*SAT.Ki_eff.*permfak,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0586             <span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0587         lgh = legend(gui.ax(5),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0588         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0589     <span class="keyword">otherwise</span>
0590         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kd_ducts.*permfak,<span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="keyword">...</span>
0591             <span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0592         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kd_corners.*permfak,<span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="keyword">...</span>
0593             <span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0594         plot(SAT.Sdfull,unitfak_2*porofak*SAT.Kd_eff.*permfak,<span class="string">'Color'</span>,coldrain,<span class="keyword">...</span>
0595             <span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0596         plot(SAT.Sifull,unitfak_2*porofak*SAT.Ki_ducts.*permfak,<span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="keyword">...</span>
0597             <span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0598         plot(SAT.Sifull,unitfak_2*porofak*SAT.Ki_corners.*permfak,<span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="keyword">...</span>
0599             <span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0600         plot(SAT.Sifull,unitfak_2*porofak*SAT.Ki_eff.*permfak,<span class="string">'Color'</span>,colimb,<span class="keyword">...</span>
0601             <span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(5));
0602         lgh = legend(gui.ax(5),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0603         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0604         lgh.NumColumns = 2;
0605         lgh.Title.String = <span class="string">'drain             imb'</span>;
0606 <span class="keyword">end</span>
0607 ymin = min([unitfak_2*porofak*SAT.Kd_eff'.*permfak;unitfak_2*porofak*SAT.Ki_eff'.*permfak]);
0608 ymax = max([unitfak_2*porofak*SAT.Kd_eff'.*permfak;unitfak_2*porofak*SAT.Ki_eff'.*permfak]);
0609 ymin = 10^floor(log10(ymin));
0610 ymax = 10^ceil(log10(ymax));
0611 set(gui.ax(5),<span class="string">'YLim'</span>,[ymin ymax]);
0612 
0613 <span class="comment">% eff - rel</span>
0614 rel1 = SAT.Kd_eff/SAT.Kd_eff(find(SAT.Sdfull&lt;tolKrel,1));
0615 rel2 = SAT.Ki_eff/SAT.Ki_eff(find(SAT.Sifull&lt;tolKrel,1));
0616 <span class="keyword">switch</span> data.geom_type
0617     <span class="keyword">case</span> <span class="string">'cyl'</span>
0618         plot(SAT.Sdfull,rel1,<span class="string">'Color'</span>,coldrain,<span class="string">'DisplayName'</span>,<span class="string">'drain'</span>,<span class="keyword">...</span>
0619             <span class="string">'Parent'</span>,gui.ax(6));
0620         plot(SAT.Sifull,rel2,<span class="string">'Color'</span>,colimb,<span class="string">'DisplayName'</span>,<span class="string">'imb'</span>,<span class="keyword">...</span>
0621             <span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0622         lgh = legend(gui.ax(6),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0623         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0624     <span class="keyword">otherwise</span>
0625         plot(SAT.Sdfull,SAT.Kd_ducts/SAT.Kd_eff(find(SAT.Sdfull&lt;tolKrel,1)),<span class="keyword">...</span>
0626             <span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0627         plot(SAT.Sdfull,SAT.Kd_corners/SAT.Kd_eff(find(SAT.Sdfull&lt;tolKrel,1)),<span class="keyword">...</span>
0628             <span class="string">'Color'</span>,coldrain,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0629         plot(SAT.Sdfull,rel1,<span class="string">'Color'</span>,coldrain,<span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0630         plot(SAT.Sifull,SAT.Ki_ducts/SAT.Ki_eff(find(SAT.Sifull&lt;tolKrel,1)),<span class="keyword">...</span>
0631             <span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">'--'</span>,<span class="string">'DisplayName'</span>,<span class="string">'ducts'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0632         plot(SAT.Sifull,SAT.Ki_corners/SAT.Ki_eff(find(SAT.Sifull&lt;tolKrel,1)),<span class="keyword">...</span>
0633             <span class="string">'Color'</span>,colimb,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="string">'DisplayName'</span>,<span class="string">'corners'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0634         plot(SAT.Sifull,rel2,<span class="string">'Color'</span>,colimb,<span class="string">'DisplayName'</span>,<span class="string">'sum'</span>,<span class="string">'Parent'</span>,gui.ax(6));
0635         lgh = legend(gui.ax(6),<span class="string">'Location'</span>,<span class="string">'SouthEast'</span>);
0636         set(lgh,<span class="string">'TextColor'</span>,colors.panelFG,<span class="string">'Color'</span>,colors.axisBG);
0637         lgh.NumColumns = 2;
0638         lgh.Title.String = <span class="string">'drain             imb'</span>;
0639 <span class="keyword">end</span>
0640 ymin = min([rel1(rel1&gt;0)'; rel2(rel2&gt;0)']);
0641 ymin = 10^floor(log10(ymin));
0642 set(gui.ax(6),<span class="string">'YLim'</span>,[ymin 1]);
0643 
0644 <span class="comment">% general axes settingd</span>
0645 set(gui.ax,<span class="string">'YScale'</span>,<span class="string">'log'</span>,<span class="string">'XLim'</span>,[0 1]);
0646 <span class="keyword">for</span> i = 1:6
0647     grid(gui.ax(i),<span class="string">'on'</span>);
0648     hold(gui.ax(i),<span class="string">'off'</span>);
0649     set(get(gui.ax(i),<span class="string">'XLabel'</span>),<span class="string">'String'</span>,<span class="string">'saturation [-]'</span>);
0650 <span class="keyword">end</span>
0651 
0652 <span class="comment">% set the individual axes titles with the full saturated values for &quot;K&quot; / &quot;k&quot;</span>
0653 col = get(gui.ax(1),<span class="string">'XColor'</span>);
0654 set(get(gui.ax(1),<span class="string">'Title'</span>),<span class="string">'String'</span>,[<span class="string">'K(S=1) = '</span>,sprintf(<span class="string">'%1.2e'</span>,KSpc),<span class="string">' '</span>,unitstr_1],<span class="keyword">...</span>
0655     <span class="string">'Color'</span>,col);
0656 set(get(gui.ax(2),<span class="string">'Title'</span>),<span class="string">'String'</span>,[<span class="string">'k(S=1) = '</span>,sprintf(<span class="string">'%1.2e'</span>,kSpc),<span class="string">' '</span>,unitstr_2],<span class="keyword">...</span>
0657     <span class="string">'Color'</span>,col);
0658 set(get(gui.ax(4),<span class="string">'Title'</span>),<span class="string">'String'</span>,[<span class="string">'K(S=1) = '</span>,sprintf(<span class="string">'%1.2e'</span>,KSeff),<span class="string">' '</span>,unitstr_1],<span class="keyword">...</span>
0659     <span class="string">'Color'</span>,col);
0660 set(get(gui.ax(5),<span class="string">'Title'</span>),<span class="string">'String'</span>,[<span class="string">'k(S=1) = '</span>,sprintf(<span class="string">'%1.2e'</span>,kSeff),<span class="string">' '</span>,unitstr_2],<span class="keyword">...</span>
0661     <span class="string">'Color'</span>,col);
0662 
0663 <span class="comment">% some special axes settings</span>
0664 <span class="keyword">for</span> i = 1:3
0665     <span class="comment">% adjust the y-limits for similar axes</span>
0666     ylim1 = get(gui.ax(i),<span class="string">'YLim'</span>);
0667     ylim2 = get(gui.ax(i+3),<span class="string">'YLim'</span>);
0668     
0669     <span class="keyword">if</span> ylim1(1) == 0
0670         ylim1(1) = ylim2(1);
0671     <span class="keyword">end</span>
0672     <span class="keyword">if</span> ylim2(1) == 0
0673         ylim2(1) = ylim1(1);
0674     <span class="keyword">end</span>
0675     
0676     <span class="keyword">if</span> i&lt;3
0677         set(gui.ax(i),<span class="string">'YLim'</span>,[min([ylim1(1) ylim2(1)]) max([ylim1(2) ylim2(2)])]);
0678         set(gui.ax(i+3),<span class="string">'YLim'</span>,[min([ylim1(1) ylim2(1)]) max([ylim1(2) ylim2(2)])]);
0679     <span class="keyword">else</span>
0680         set(gui.ax(i),<span class="string">'YLim'</span>,[min([ylim1(1) ylim2(1)]) 1]);
0681         set(gui.ax(i+3),<span class="string">'YLim'</span>,[min([ylim1(1) ylim2(1)]) 1]);
0682     <span class="keyword">end</span>
0683     
0684     <span class="comment">% axes labels</span>
0685     <span class="keyword">if</span> i == 1
0686         set(get(gui.ax(i),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,ylstr_1);
0687         set(get(gui.ax(i+3),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,ylstr_1);
0688     <span class="keyword">elseif</span> i == 2
0689         set(get(gui.ax(i),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,ylstr_2);
0690         set(get(gui.ax(i+3),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,ylstr_2);
0691     <span class="keyword">else</span>
0692         set(get(gui.ax(i),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,<span class="string">'relative cond. / perm. [-]'</span>);
0693         set(get(gui.ax(i+3),<span class="string">'YLabel'</span>),<span class="string">'String'</span>,<span class="string">'relative cond. / perm. [-]'</span>);
0694     <span class="keyword">end</span>
0695 <span class="keyword">end</span>
0696 
0697 <span class="keyword">end</span>
0698 
0699 <span class="comment">%------------- END OF CODE --------------</span>
0700 
0701 <span class="comment">%% License:</span>
0702 <span class="comment">% MIT License</span>
0703 <span class="comment">%</span>
0704 <span class="comment">% Copyright (c) 2018 Thomas Hiller</span>
0705 <span class="comment">%</span>
0706 <span class="comment">% Permission is hereby granted, free of charge, to any person obtaining a copy</span>
0707 <span class="comment">% of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
0708 <span class="comment">% in the Software without restriction, including without limitation the rights</span>
0709 <span class="comment">% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
0710 <span class="comment">% copies of the Software, and to permit persons to whom the Software is</span>
0711 <span class="comment">% furnished to do so, subject to the following conditions:</span>
0712 <span class="comment">%</span>
0713 <span class="comment">% The above copyright notice and this permission notice shall be included in all</span>
0714 <span class="comment">% copies or substantial portions of the Software.</span>
0715 <span class="comment">%</span>
0716 <span class="comment">% THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
0717 <span class="comment">% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
0718 <span class="comment">% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
0719 <span class="comment">% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
0720 <span class="comment">% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
0721 <span class="comment">% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
0722 <span class="comment">% SOFTWARE.</span></pre></div>
<hr><address>Generated by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" target="_parent">m2html</a></strong> &copy; 2005</address>
</body>
</html>